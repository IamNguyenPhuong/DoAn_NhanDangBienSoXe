
<!DOCTYPE html>
<html lang="vi">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Trang Chủ - Quản Lý Bãi Xe An Cư</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; }
        header { background-color: #333; color: white; padding: 1em 0; text-align: center; }
        .container { width: 80%; margin: 20px auto; background-color: white; padding: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .welcome-message { text-align: right; margin-bottom: 20px; }

        /* CSS cho menu dọc đơn giản */
        .main-nav ul, .management-nav ul { list-style-type: none; padding: 0; } /* Áp dụng cho cả hai menu */
        .main-nav ul li, .management-nav ul li { margin-bottom: 10px; }
        .main-nav ul li a, .management-nav ul li a {
            display: block;
            text-decoration: none;
            color: #333;
            font-weight: bold;
            padding: 12px 18px;
            background-color: #e9e9e9;
            border: 1px solid #ddd;
            border-radius: 5px;
            transition: background-color 0.3s, color 0.3s;
        }
        .main-nav ul li a:hover, .management-nav ul li a:hover { background-color: #4CAF50; color: white; }

        .management-section { margin-top: 30px; padding-top: 20px; border-top: 1px dashed #ccc; }
        .management-section h3 { margin-bottom: 15px; font-size: 1.3em; color: #555;}

        .stats { margin-top: 30px; font-size: 1.1em; }
    </style>
</head>
<body>
    <header>
        <h1>HỆ THỐNG QUẢN LÝ BÃI XE CHUNG CƯ MINI AN CƯ</h1>
    </header>
    <div class="container">
        {% if user.is_authenticated %}
            <p class="welcome-message">Xin chào, <strong>{{ user.username }}</strong>! | <a href="{% url 'parking_management:logout_user' %}" style="color: #d9534f;">Đăng xuất</a></p>
        {% else %}
            <p class="welcome-message"><a href="{% url 'parking_management:login_user' %}">Đăng nhập</a></p>
        {% endif %}

        <h2>Chức năng chính:</h2>
        <nav class="main-nav">
            <ul>
                {% if user.is_authenticated %}
                    <li><a href="{% url 'parking_management:kiem_tra_bien_so' %}">Ghi Nhận Xe Vào</a></li>
                    <li><a href="{% url 'parking_management:xe_ra_khoi_bai' %}">Xử Lý Xe Ra</a></li>
                    <li><a href="{% url 'parking_management:parkinghistory_list' %}">Xem Lịch Sử Ra Vào</a></li>
                {% else %}
                    <li>Vui lòng đăng nhập để sử dụng các chức năng.</li>
                {% endif %}
            </ul>
        </nav>

        {% if user.is_authenticated %}
        <div class="management-section">
            <h3>Quản lý Dữ liệu Khách:</h3> {# Đổi tên cho rõ ràng #}
            <nav class="management-nav"> {# Sử dụng class riêng cho menu này nếu muốn style khác #}
                <ul>
                    <li><a href="{% url 'parking_management:khachthue_list' %}">Khách Thuê</a></li>
                    <li><a href="{% url 'parking_management:vehicle_list' %}">Xe Đăng Ký</a></li>
                    <li><a href="{% url 'parking_management:monthlyticketrule_list' %}">Giá Vé Tháng</a></li>
                </ul>
            </nav>
        </div>

        <div class="management-section"> {# THÊM KHỐI MỚI CHO "QUẢN LÝ KHÁC" #}
            <h3>Quản lý Khác:</h3>
            <nav class="management-nav">
                <ul>
                    <li><a href="{% url 'parking_management:vehicletype_list' %}">Loại Xe</a></li>
                    <li><a href="{% url 'parking_management:perturnticketrule_list' %}">Giá Vé Lượt</a></li>
                    {# Các chức năng quản lý khác có thể thêm vào đây #}
                </ul>
            </nav>
        </div>

        <div class="management-section"> {# Giữ lại phần truy cập Admin Django riêng biệt nếu muốn #}
             <h3>Truy cập Nâng cao:</h3>
             <nav class="management-nav">
                <ul>
                    <li><a href="{% url 'admin:index' %}" target="_blank" style="background-color: #5bc0de; color:white;">Truy cập Admin Django</a></li>
                </ul>
            </nav>
        </div>
        {% endif %}

        <div class="stats">
            <p>Số xe hiện đang trong bãi: <strong>{{ so_xe_trong_bai|default_if_none:"0" }}</strong></p>
        </div>
    </div>
</body>
</html>