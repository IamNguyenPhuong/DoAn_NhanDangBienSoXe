{% extends 'parking_management/base_user.html' %}
{% load humanize %}

{% block title %}Lịch sử Giao dịch Vé tháng{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title">Lịch sử Giao dịch Vé tháng</h1>
        <p class="subtitle">Toàn bộ các giao dịch đăng ký vé tháng đã được ghi nhận.</p>

        <div class="table-container">
            <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth">
                <thead>
                    <tr>
                        <th>STT</th>
                        <th>Biển số xe</th>
                        <th>Chủ sở hữu</th>
                        <th>Loại xe</th>
                        <th>Ngày mua</th>
                        <th>Ngày hết hạn</th>
                        <th class="has-text-right">Giá tiền (VNĐ)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sale in sales %}
                    <tr>
                        <td>{{ forloop.counter }}</td>
                        <td>{{ sale.vehicle.BienSoXe }}</td>
                       <td>{{ sale.vehicle.KhachThueID.HoVaTen }}</td>
                        <td>{{ sale.vehicle.VehicleTypeID.TypeName }}</td>
                        <td>{{ sale.purchase_date|date:"d/m/Y" }}</td>
                        <td>{{ sale.expiry_date|date:"d/m/Y" }}</td>
                        <td class="has-text-right">{{ sale.price|intcomma }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" class="has-text-centered">Chưa có giao dịch nào được ghi nhận.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endblock %}